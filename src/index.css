import React, { useState } from 'react';
import './index.css';

function App() {
  const [authState, setAuthState] = useState('blocked');

  // Mock signals - this is where BigQuery data will eventually map
  const signals = [
    { id: 'BQ-901', name: "EU AI Act Article 14 Analysis", status: "Review", latency: "14ms" },
    { id: 'BQ-902', name: "FDA 21 CFR Part 11 Validation", status: "Authorized", latency: "22ms" },
    { id: 'BQ-903', name: "ISO 27001 Control Mapping", status: "Blocked", latency: "9ms" }
  ];

  const getPanelData = () => {
    switch (authState) {
      case 'authorized':
        return {
          title: 'Proof Authorized',
          text: 'Defensibility thresholds met. Official proof has been generated and timestamped.',
          class: 'panel-authorized'
        };
      case 'review':
        return {
          title: 'Under Review',
          text: 'Decision rationale captured. Waiting for final verification of evidence.',
          class: 'panel-review'
        };
      default:
        return {
          title: 'Proof Blocked',
          text: 'No defensible proof may be generated until authorization thresholds are met.',
          class: 'panel-blocked'
        };
    }
  };

  const panel = getPanelData();

  return (
    <div className="app-wrapper">
      <div className="topbar">
        <div className="topbar-inner">
          <div className="topbar-left">COMPLIANCEWORXS AUTHORIZATION ENGINE™</div>
          <div className="badge">
            Proof {authState} by design
          </div>
        </div>
      </div>

      <header className="header">
        <div className="header-inner">
          <div className="brand">
            <div className="brand-name">COMPLIANCEWORXS</div>
            <div className="brand-tag">Defensible decisions, before inspection.</div>
          </div>
          <nav className="nav">
            <a href="#overview" className="navlink">Overview</a>
            <a href="#stream" className="navlink">Intelligence Stream</a>
            <a href="#access" className="navlink">Access</a>
          </nav>
          <div className="header-actions">
            <button className="button-secondary">Sign In</button>
            <button className="button-primary">Start Assessment</button>
          </div>
        </div>
      </header>

      <section className="hero">
        <div className="hero-inner">
          <div className="hero-copy">
            <h1>Decision-Grade Compliance Intelligence</h1>
            <p className="lead">
              ComplianceWorxs evaluates regulatory decisions before documentation exists. 
              Proof is generated only after defensibility thresholds are met.
            </p>
            <div className="cta-row">
              <button className="button-primary">Start Assessment</button>
              <button className="link-button">How Authorization Works →</button>
            </div>

            <div className="demo-toggle">
              <p style={{fontSize: '12px', marginBottom: '10px', opacity: 0.8}}>Demo: authorization state</p>
              {['blocked', 'review', 'authorized'].map((state) => (
                <button 
                  key={state} 
                  className={`pill ${authState === state ? 'active' : ''}`}
                  onClick={() => setAuthState(state)}
                >
                  {state.toUpperCase()}
                </button>
              ))}
            </div>
          </div>

          <div className={`panel ${panel.class}`}>
            <h3 style={{fontSize: '1.4rem'}}>{panel.title}</h3>
            <p>{panel.text}</p>
          </div>
        </div>
      </section>

      <section className="container" id="overview">
        <h2>Deterministic Decision Review (DDR)</h2>
        <p>DDR captures the signal, the decision, the rationale, and the evidence.</p>
        <div className="grid">
          <div className="card">
            <h3>Documentation Does Not Equal Defensibility</h3>
            <ul>
              <li>Inspectors assess decisions, not volume</li>
              <li>Proof without defensibility increases inspection risk</li>
            </ul>
          </div>
          <div className="card">
            <h3>How the System Works</h3>
            <ol>
              <li>Assess the decision</li>
              <li>Authorize proof</li>
            </ol>
          </div>
        </div>
      </section>

      {/* Intelligence Stream Section */}
      <section className="section-muted stream-section" id="stream">
        <div className="container">
          <h2>Intelligence Stream</h2>
          <p>Real-time regulatory signal processing powered by Google AI.</p>
          <div className="stream-feed">
            {signals.map(signal => (
              <div key={signal.id} className="stream-item">
                <div className="signal-info">
                  <strong>{signal.name}</strong>
                  <div className="signal-meta">SOURCE: {signal.id} | LATENCY: {signal.latency}</div>
                </div>
                <div className="badge">{signal.status}</div>
              </div>
            ))}
          </div>
        </div>
      </section>

      <div className="authority-band">
        <p>Proof generation is governed. Indefensible proof is blocked by design.</p>
      </div>
    </div>
  );
}

export default App;
